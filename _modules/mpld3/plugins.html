

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>mpld3.plugins &mdash; Bringing Matplotlib to the Browser</title>
    
    <link rel="stylesheet" href="../../_static/mpld3.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/theme_extras.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="top" title="Bringing Matplotlib to the Browser" href="../../index.html" />
    <link rel="up" title="mpld3" href="../mpld3.html" /> 
  </head>
  <body>
      <div class="header"><a href="../../index.html">
          <img class="leftlogo" src="../../_static/mpld3-medium.png" alt="Logo"/>
        </a><h1 class="heading"><a href="../../index.html">
          <span>Bringing Matplotlib to the Browser</span></a></h1>
        <h2 class="heading"><span>mpld3.plugins</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a class="uplink" href="../../index.html">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <h1>Source code for mpld3.plugins</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Plugins to add behavior to mpld3 charts</span>
<span class="sd">=======================================</span>

<span class="sd">Plugins are means of adding additional javascript features to D3-rendered</span>
<span class="sd">matplotlib plots.  A number of plugins are defined here; it is also possible</span>
<span class="sd">to create nearly any imaginable behavior by defining your own custom plugin.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;connect&#39;</span><span class="p">,</span> <span class="s">&#39;clear&#39;</span><span class="p">,</span> <span class="s">&#39;get_plugins&#39;</span><span class="p">,</span> <span class="s">&#39;PluginBase&#39;</span><span class="p">,</span>
           <span class="s">&#39;Reset&#39;</span><span class="p">,</span> <span class="s">&#39;Zoom&#39;</span><span class="p">,</span> <span class="s">&#39;BoxZoom&#39;</span><span class="p">,</span>
           <span class="s">&#39;PointLabelTooltip&#39;</span><span class="p">,</span> <span class="s">&#39;PointHTMLTooltip&#39;</span><span class="p">,</span> <span class="s">&#39;LineLabelTooltip&#39;</span><span class="p">,</span>
           <span class="s">&#39;MousePosition&#39;</span><span class="p">]</span>

<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">uuid</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>

<span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">get_id</span>


<div class="viewcode-block" id="get_plugins"><a class="viewcode-back" href="../../modules/API.html#mpld3.plugins.get_plugins">[docs]</a><span class="k">def</span> <span class="nf">get_plugins</span><span class="p">(</span><span class="n">fig</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the list of plugins in the figure&quot;&quot;&quot;</span>
    <span class="n">connect</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span><span class="o">.</span><span class="n">mpld3_plugins</span>

</div>
<div class="viewcode-block" id="connect"><a class="viewcode-back" href="../../modules/API.html#mpld3.plugins.connect">[docs]</a><span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="o">*</span><span class="n">plugins</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Connect one or more plugins to a figure</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fig : matplotlib Figure instance</span>
<span class="sd">        The figure to which the plugins will be connected</span>

<span class="sd">    *plugins :</span>
<span class="sd">        Additional arguments should be plugins which will be connected</span>
<span class="sd">        to the figure.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; from mpld3 import plugins</span>
<span class="sd">    &gt;&gt;&gt; fig, ax = plt.subplots()</span>
<span class="sd">    &gt;&gt;&gt; lines = ax.plot(range(10), &#39;-k&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plugins.connect(fig, plugins.LineLabelTooltip(lines[0]))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">Figure</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;plugins.connect: first argument must be a figure&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s">&#39;mpld3_plugins&#39;</span><span class="p">):</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">mpld3_plugins</span> <span class="o">=</span> <span class="n">DEFAULT_PLUGINS</span><span class="p">[:]</span>
    <span class="k">for</span> <span class="n">plugin</span> <span class="ow">in</span> <span class="n">plugins</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">mpld3_plugins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">plugin</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="clear"><a class="viewcode-back" href="../../modules/API.html#mpld3.plugins.clear">[docs]</a><span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="n">fig</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Clear all plugins from the figure, including defaults&quot;&quot;&quot;</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">mpld3_plugins</span> <span class="o">=</span> <span class="p">[]</span>

</div>
<span class="k">class</span> <span class="nc">PluginBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_</span>

    <span class="k">def</span> <span class="nf">javascript</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;JAVASCRIPT&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;js_args_&quot;</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">JAVASCRIPT</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">js_args_</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">JAVASCRIPT</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">css</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;css_&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">css_</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;&quot;</span>


<div class="viewcode-block" id="Reset"><a class="viewcode-back" href="../../modules/API.html#mpld3.plugins.Reset">[docs]</a><span class="k">class</span> <span class="nc">Reset</span><span class="p">(</span><span class="n">PluginBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Plugin to add a reset button&quot;&quot;&quot;</span>
    <span class="n">dict_</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;reset&quot;</span><span class="p">}</span>

</div>
<div class="viewcode-block" id="MousePosition"><a class="viewcode-back" href="../../modules/API.html#mpld3.plugins.MousePosition">[docs]</a><span class="k">class</span> <span class="nc">MousePosition</span><span class="p">(</span><span class="n">PluginBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Plugin to display coordinates for the current mouse position</span>

<span class="sd">    Example</span>
<span class="sd">    -------</span>
<span class="sd">    &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; from mpld3 import fig_to_html, plugins</span>
<span class="sd">    &gt;&gt;&gt; fig, ax = plt.subplots()</span>
<span class="sd">    &gt;&gt;&gt; points = ax.plot(range(10), &#39;o&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plugins.connect(fig, plugins.MousePosition())</span>
<span class="sd">    &gt;&gt;&gt; fig_to_html(fig)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s">&quot;.3g&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dict_</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;mouseposition&quot;</span><span class="p">,</span>
                      <span class="s">&quot;fontsize&quot;</span><span class="p">:</span> <span class="n">fontsize</span><span class="p">,</span>
                      <span class="s">&quot;fmt&quot;</span><span class="p">:</span> <span class="n">fmt</span><span class="p">}</span>

</div>
<div class="viewcode-block" id="Zoom"><a class="viewcode-back" href="../../modules/API.html#mpld3.plugins.Zoom">[docs]</a><span class="k">class</span> <span class="nc">Zoom</span><span class="p">(</span><span class="n">PluginBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Plugin to add zoom behavior to the plot</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    button : boolean, optional</span>
<span class="sd">        if True (default), then add a button to enable/disable zoom behavior</span>
<span class="sd">    enabled : boolean, optional</span>
<span class="sd">        specify whether the zoom should be enabled by default. By default,</span>
<span class="sd">        zoom is enabled if button == False, and disabled if button == True.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Even if ``enabled`` is specified, other plugins may modify this state.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">enabled</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">enabled</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dict_</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;zoom&quot;</span><span class="p">,</span>
                      <span class="s">&quot;button&quot;</span><span class="p">:</span> <span class="n">button</span><span class="p">,</span>
                      <span class="s">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">enabled</span><span class="p">}</span>

</div>
<div class="viewcode-block" id="BoxZoom"><a class="viewcode-back" href="../../modules/API.html#mpld3.plugins.BoxZoom">[docs]</a><span class="k">class</span> <span class="nc">BoxZoom</span><span class="p">(</span><span class="n">PluginBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Plugin to add box-zoom behavior to the plot</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    button : boolean, optional</span>
<span class="sd">        if True (default), then add a button to enable/disable zoom behavior</span>
<span class="sd">    enabled : boolean, optional</span>
<span class="sd">        specify whether the zoom should be enabled by default. By default,</span>
<span class="sd">        zoom is enabled if button == False, and disabled if button == True.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Even if ``enabled`` is specified, other plugins may modify this state.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">enabled</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">enabled</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dict_</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;boxzoom&quot;</span><span class="p">,</span>
                      <span class="s">&quot;button&quot;</span><span class="p">:</span> <span class="n">button</span><span class="p">,</span>
                      <span class="s">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">enabled</span><span class="p">}</span>

</div>
<div class="viewcode-block" id="PointLabelTooltip"><a class="viewcode-back" href="../../modules/API.html#mpld3.plugins.PointLabelTooltip">[docs]</a><span class="k">class</span> <span class="nc">PointLabelTooltip</span><span class="p">(</span><span class="n">PluginBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Plugin to enable a tooltip: text which hovers over points.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    points : matplotlib Collection or Line2D object</span>
<span class="sd">        The figure element to apply the tooltip to</span>
<span class="sd">    labels : array or None</span>
<span class="sd">        If supplied, specify the labels for each point in points.  If not</span>
<span class="sd">        supplied, the (x, y) values will be used.</span>
<span class="sd">    hoffset, voffset : integer</span>
<span class="sd">        The number of pixels to offset the tooltip text.  Default is</span>
<span class="sd">        hoffset = 0, voffset = 10</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; from mpld3 import fig_to_html, plugins</span>
<span class="sd">    &gt;&gt;&gt; fig, ax = plt.subplots()</span>
<span class="sd">    &gt;&gt;&gt; points = ax.plot(range(10), &#39;o&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plugins.connect(fig, PointLabelTooltip(points[0]))</span>
<span class="sd">    &gt;&gt;&gt; fig_to_html(fig)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">hoffset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">voffset</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s">&quot;mouse&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">location</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;bottom left&quot;</span><span class="p">,</span> <span class="s">&quot;top left&quot;</span><span class="p">,</span> <span class="s">&quot;bottom right&quot;</span><span class="p">,</span>
                            <span class="s">&quot;top right&quot;</span><span class="p">,</span> <span class="s">&quot;mouse&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;invalid location: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">location</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">):</span>
            <span class="n">suffix</span> <span class="o">=</span> <span class="s">&quot;pts&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">suffix</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dict_</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;tooltip&quot;</span><span class="p">,</span>
                      <span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">get_id</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">suffix</span><span class="p">),</span>
                      <span class="s">&quot;labels&quot;</span><span class="p">:</span> <span class="n">labels</span><span class="p">,</span>
                      <span class="s">&quot;hoffset&quot;</span><span class="p">:</span> <span class="n">hoffset</span><span class="p">,</span>
                      <span class="s">&quot;voffset&quot;</span><span class="p">:</span> <span class="n">voffset</span><span class="p">,</span>
                      <span class="s">&quot;location&quot;</span><span class="p">:</span> <span class="n">location</span><span class="p">}</span>

</div>
<div class="viewcode-block" id="LineLabelTooltip"><a class="viewcode-back" href="../../modules/API.html#mpld3.plugins.LineLabelTooltip">[docs]</a><span class="k">class</span> <span class="nc">LineLabelTooltip</span><span class="p">(</span><span class="n">PluginBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Plugin to enable a tooltip: text which hovers over a line.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    line : matplotlib Line2D object</span>
<span class="sd">        The figure element to apply the tooltip to</span>
<span class="sd">    label : string</span>
<span class="sd">        If supplied, specify the labels for each point in points.  If not</span>
<span class="sd">        supplied, the (x, y) values will be used.</span>
<span class="sd">    hoffset, voffset : integer</span>
<span class="sd">        The number of pixels to offset the tooltip text.  Default is</span>
<span class="sd">        hoffset = 0, voffset = 10</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; from mpld3 import fig_to_html, plugins</span>
<span class="sd">    &gt;&gt;&gt; fig, ax = plt.subplots()</span>
<span class="sd">    &gt;&gt;&gt; points = ax.plot(range(10), &#39;o&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plugins.connect(fig, PointLabelTooltip(points[0]))</span>
<span class="sd">    &gt;&gt;&gt; fig_to_html(fig)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">hoffset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">voffset</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s">&quot;mouse&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">location</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;bottom left&quot;</span><span class="p">,</span> <span class="s">&quot;top left&quot;</span><span class="p">,</span> <span class="s">&quot;bottom right&quot;</span><span class="p">,</span>
                            <span class="s">&quot;top right&quot;</span><span class="p">,</span> <span class="s">&quot;mouse&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;invalid location: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">location</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dict_</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;tooltip&quot;</span><span class="p">,</span>
                      <span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">get_id</span><span class="p">(</span><span class="n">points</span><span class="p">),</span>
                      <span class="s">&quot;labels&quot;</span><span class="p">:</span> <span class="n">label</span> <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="p">[</span><span class="n">label</span><span class="p">],</span>
                      <span class="s">&quot;hoffset&quot;</span><span class="p">:</span> <span class="n">hoffset</span><span class="p">,</span>
                      <span class="s">&quot;voffset&quot;</span><span class="p">:</span> <span class="n">voffset</span><span class="p">,</span>
                      <span class="s">&quot;location&quot;</span><span class="p">:</span> <span class="n">location</span><span class="p">}</span>

</div>
<span class="k">class</span> <span class="nc">LinkedBrush</span><span class="p">(</span><span class="n">PluginBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Plugin to enable linked brushing between plots</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    points : matplotlib Collection or Line2D object</span>
<span class="sd">        A representative of the scatter plot elements to brush.</span>
<span class="sd">    button : boolean, optional</span>
<span class="sd">        if True (default), then add a button to enable/disable zoom behavior</span>
<span class="sd">    enabled : boolean, optional</span>
<span class="sd">        specify whether the zoom should be enabled by default. default=True.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; import numpy as np</span>
<span class="sd">    &gt;&gt;&gt; from mpld3 import fig_to_html, plugins</span>
<span class="sd">    &gt;&gt;&gt; X = np.random.random((3, 100))</span>
<span class="sd">    &gt;&gt;&gt; fig, ax = plt.subplots(3, 3)</span>
<span class="sd">    &gt;&gt;&gt; for i in range(2):</span>
<span class="sd">    ...     for j in range(2):</span>
<span class="sd">    ...         points = ax[i, j].scatter(X[i], X[j])</span>
<span class="sd">    &gt;&gt;&gt; plugins.connect(fig, LinkedBrush(points))</span>
<span class="sd">    &gt;&gt;&gt; fig_to_html(fig)</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notice that in the above example, only one of the four sets of points is</span>
<span class="sd">    passed to the plugin. This is all that is needed: for the sake of efficient</span>
<span class="sd">    data storage, mpld3 keeps track of which plot objects draw from the same</span>
<span class="sd">    data.</span>

<span class="sd">    Also note that for the linked brushing to work correctly, the data must</span>
<span class="sd">    not contain any NaNs. The presence of NaNs makes the different data views</span>
<span class="sd">    have different sizes, so that mpld3 is unable to link the related points.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">):</span>
            <span class="n">suffix</span> <span class="o">=</span> <span class="s">&quot;pts&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">suffix</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dict_</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;linkedbrush&quot;</span><span class="p">,</span>
                      <span class="s">&quot;button&quot;</span><span class="p">:</span> <span class="n">button</span><span class="p">,</span>
                      <span class="s">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">enabled</span><span class="p">,</span>
                      <span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">get_id</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">suffix</span><span class="p">)}</span>


<div class="viewcode-block" id="PointHTMLTooltip"><a class="viewcode-back" href="../../modules/API.html#mpld3.plugins.PointHTMLTooltip">[docs]</a><span class="k">class</span> <span class="nc">PointHTMLTooltip</span><span class="p">(</span><span class="n">PluginBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Plugin to enable an HTML tooltip:</span>
<span class="sd">    formated text which hovers over points.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    points : matplotlib Collection or Line2D object</span>
<span class="sd">        The figure element to apply the tooltip to</span>
<span class="sd">    labels : list</span>
<span class="sd">        The labels for each point in points, as strings of unescaped HTML.</span>
<span class="sd">    hoffset, voffset : integer, optional</span>
<span class="sd">        The number of pixels to offset the tooltip text.  Default is</span>
<span class="sd">        hoffset = 0, voffset = 10</span>
<span class="sd">    css : str, optional</span>
<span class="sd">        css to be included, for styling the label html if desired</span>
<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; from mpld3 import fig_to_html, plugins</span>
<span class="sd">    &gt;&gt;&gt; fig, ax = plt.subplots()</span>
<span class="sd">    &gt;&gt;&gt; points = ax.plot(range(10), &#39;o&#39;)</span>
<span class="sd">    &gt;&gt;&gt; labels = [&#39;&lt;h1&gt;{title}&lt;/h1&gt;&#39;.format(title=i) for i in range(10)]</span>
<span class="sd">    &gt;&gt;&gt; plugins.connect(fig, PointHTMLTooltip(points[0], labels))</span>
<span class="sd">    &gt;&gt;&gt; fig_to_html(fig)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">JAVASCRIPT</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">    mpld3.register_plugin(&quot;htmltooltip&quot;, HtmlTooltipPlugin);</span>
<span class="s">    HtmlTooltipPlugin.prototype = Object.create(mpld3.Plugin.prototype);</span>
<span class="s">    HtmlTooltipPlugin.prototype.constructor = HtmlTooltipPlugin;</span>
<span class="s">    HtmlTooltipPlugin.prototype.requiredProps = [&quot;id&quot;];</span>
<span class="s">    HtmlTooltipPlugin.prototype.defaultProps = {labels:null, hoffset:0, voffset:10};</span>
<span class="s">    function HtmlTooltipPlugin(fig, props){</span>
<span class="s">        mpld3.Plugin.call(this, fig, props);</span>
<span class="s">    };</span>

<span class="s">    HtmlTooltipPlugin.prototype.draw = function(){</span>
<span class="s">       var obj = mpld3.get_element(this.props.id);</span>
<span class="s">       var labels = this.props.labels;</span>
<span class="s">       var tooltip = d3.select(&quot;body&quot;).append(&quot;div&quot;)</span>
<span class="s">                    .attr(&quot;class&quot;, &quot;mpld3-tooltip&quot;)</span>
<span class="s">                    .style(&quot;position&quot;, &quot;absolute&quot;)</span>
<span class="s">                    .style(&quot;z-index&quot;, &quot;10&quot;)</span>
<span class="s">                    .style(&quot;visibility&quot;, &quot;hidden&quot;);</span>

<span class="s">       obj.elements()</span>
<span class="s">           .on(&quot;mouseover&quot;, function(d, i){</span>
<span class="s">                              tooltip.html(labels[i])</span>
<span class="s">                                     .style(&quot;visibility&quot;, &quot;visible&quot;);})</span>
<span class="s">           .on(&quot;mousemove&quot;, function(d, i){</span>
<span class="s">                    tooltip</span>
<span class="s">                      .style(&quot;top&quot;, d3.event.pageY + this.props.voffset + &quot;px&quot;)</span>
<span class="s">                      .style(&quot;left&quot;,d3.event.pageX + this.props.hoffset + &quot;px&quot;);</span>
<span class="s">                 }.bind(this))</span>
<span class="s">           .on(&quot;mouseout&quot;,  function(d, i){</span>
<span class="s">                           tooltip.style(&quot;visibility&quot;, &quot;hidden&quot;);});</span>
<span class="s">    };</span>
<span class="s">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">hoffset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">voffset</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">css</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">points</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">voffset</span> <span class="o">=</span> <span class="n">voffset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hoffset</span> <span class="o">=</span> <span class="n">hoffset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">css_</span> <span class="o">=</span> <span class="n">css</span> <span class="ow">or</span> <span class="s">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">):</span>
            <span class="n">suffix</span> <span class="o">=</span> <span class="s">&quot;pts&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">suffix</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dict_</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;htmltooltip&quot;</span><span class="p">,</span>
                      <span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="n">get_id</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">suffix</span><span class="p">),</span>
                      <span class="s">&quot;labels&quot;</span><span class="p">:</span> <span class="n">labels</span><span class="p">,</span>
                      <span class="s">&quot;hoffset&quot;</span><span class="p">:</span> <span class="n">hoffset</span><span class="p">,</span>
                      <span class="s">&quot;voffset&quot;</span><span class="p">:</span> <span class="n">voffset</span><span class="p">}</span>

</div>
<span class="n">DEFAULT_PLUGINS</span> <span class="o">=</span> <span class="p">[</span><span class="n">Reset</span><span class="p">(),</span> <span class="n">Zoom</span><span class="p">(),</span> <span class="n">BoxZoom</span><span class="p">()]</span>
</pre></div>

      </div>
      <div class="bottomnav">
      
        <p>
        <a class="uplink" href="../../index.html">Contents</a>
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2014, mpld3 developers.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>